import subprocess

# Define the USSD code to be run
ussd_code = "*151*1*1*0774115974*400%23"

# Construct the ADB command to run the USSD code
adb_command = ['adb', 'shell', 'am', 'start', '-a', 'android.intent.action.CALL', '-d', 'tel:' + ussd_code ]  # Updated adb_command

# Execute the ADB command using subprocess
process = subprocess.Popen(adb_command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
output, error = process.communicate()

# Check if the command was successful
if process.returncode == 0:
    print('USSD code successfully executed.')
else:
    print('An error occurred while executing the USSD code.')
    print('Error:', error.decode('utf-8'))