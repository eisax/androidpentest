import subprocess
import socket

# Specify the IP address and port you want to check
device_ip = '192.168.88.102'
port = 5555

# Run the ping command to check the connectivity to the device
ping_command = ['ping', '-c', '4', device_ip]  # '-c' specifies the number of pings to send
process = subprocess.Popen(ping_command, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
output, error = process.communicate()

# Check if the ping was successful
if process.returncode == 0:
    print("Device with IP address", device_ip, "is reachable.")

    # Try to open the specified port
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    try:
        sock.bind((device_ip, port))
        print("Port", port, "is open and ready for connections.")
    except OSError as e:
        print("Failed to open port", port, ":", str(e))
    finally:
        sock.close()
else:
    print("Device with IP address", device_ip, "is not reachable.")
    print('Error:', error.decode('utf-8'))