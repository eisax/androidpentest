import subprocess

# Define the phone number to send the SMS
phone_number = "0774259097"

# Read the message content from a text file
with open('message_payload.txt', 'r') as file:
    message = file.read()

# Construct the ADB command to open the SMS app in the background
adb_command_open = ['adb', 'shell', 'am', 'start', '-a', 'android.intent.action.SENDTO', '-d', 'sms:' + phone_number]

# Execute the ADB command to open the SMS app in the background
process_open = subprocess.Popen(adb_command_open, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
output, error = process_open.communicate()

# Check if the command to open the SMS app was successful
if process_open.returncode == 0:
    print('SMS app opened successfully.')

    # Construct the ADB command to input the message content and send the SMS
    adb_command_input = ['adb', 'shell', 'input', 'text', '\"' + message + '\"']

    # Execute the ADB command to input the message content
    process_input = subprocess.Popen(adb_command_input, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    output, error = process_input.communicate()

    # Check if the command to input the message content was successful
    if process_input.returncode == 0:
        print('Message content inputted successfully.')

        # Construct the ADB command to send the SMS
        adb_command_send = ['adb', 'shell', 'input', 'keyevent', 'KEYCODE_ENTER']

        # Execute the ADB command to send the SMS
        process_send = subprocess.Popen(adb_command_send, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        output, error = process_send.communicate()

        # Check if the command to send the SMS was successful
        if process_send.returncode == 0:
            print('SMS sent successfully.')
        else:
            print('An error occurred while sending the SMS.')
            print('Error:', error.decode('utf-8'))
    else:
        print('An error occurred while inputting the message content.')
        print('Error:', error.decode('utf-8'))
else:
    print('An error occurred while opening the SMS app.')
    print('Error:', error.decode('utf-8'))